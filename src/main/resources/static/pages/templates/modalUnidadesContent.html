<div class="modal-header">
	<h3 class="modal-title">Unidade</h3>
</div>

<form class="form-horizontal" name="unidadeForm">
	<div class="modal-body">
		<input class="form-control" type="hidden" ng-model="unidade.idObra">
		
		<div class="form-group">
			<label class="col-lg-4 control-label">Nome</label>
			<div class="col-lg-6">
				<input class="form-control" type="text"
				ng-model="unidade.nomeUnidade" name="nome" maxLength="25"
				placeholder="Digite o nome da Unidade" ng-required="true" />
			</div>
		</div>

		<div class="form-group">
			<label class="col-lg-4 control-label">Data Início</label>
			<div class="col-lg-4">
				<p class="input-group">
          			<input type="text" class="form-control" name="dataInicio" uib-datepicker-popup="{{format}}" ng-model="unidade.dataInicio" is-open="dataInicio.aberto" min-date="minDate" max-date="maxDate" datepicker-options="dateOptions" ng-required="true" close-text="Close" alt-input-formats="altInputFormats" ng-focus="abrirDataInicio()" ng-blur="dataInicioChange(unidade)">
          		<span class="input-group-btn">
            		<button type="button" class="btn btn-default" ng-click="abrirDataInicio()"><i class="glyphicon glyphicon-calendar"></i></button>
          		</span>
   			</p>
			</div>
		</div>

		<div class="form-group">
			<label class="col-lg-4 control-label">Previsão de Termino</label>
			<div class="col-lg-4">
				<p class="input-group">
          			<input type="text" class="form-control" name="dataPrevistaTermino" uib-datepicker-popup="{{format}}" ng-model="unidade.dataPrevistaTermino" is-open="dataPrevistaTermino.aberto" min-date="minDate" max-date="maxDate" datepicker-options="dateOptions" ng-required="true" close-text="Close" alt-input-formats="altInputFormats" ng-focus="abrirDataPrevistaTermino()" ng-blur="dataPrevistaChange(unidade)" >
          		<span class="input-group-btn">
            		<button type="button" class="btn btn-default" ng-click="abrirDataPrevistaTermino()"><i class="glyphicon glyphicon-calendar"></i></button>
          		</span>
   			</p>
			</div>
		</div>
			
		<div class="form-group">
			<label class="col-lg-4 control-label">Custo Previsto</label>
			<div class="col-lg-4">
				<input class="form-control" ng-model="unidade.custoPrevisto" maxLength="20"  ng-required="true" ui-money-mask/>
			</div>
			<div>
				<input class="btn btn-default" type="button" ng-click="modalFasesUpdate('md')" value="Adicionar Fase">
			</div>
		</div>

		<div class="form-group">
			<label class="col-lg-4 control-label">Descrição</label>
			<div class="col-lg-7">
				<textarea class="form-control" rows="5"
				ng-model="unidade.descricao" name="descricao"></textarea>		
			</div>
		</div>
																					
		<div class="row">
			<div class="col-lg-10 col-lg-offset-1">
				<div class="table-responsive">

					<table st-table="unidades" class="table table-striped"
						st-pagination-scroll>
						<thead>
							<tr>
								<th>Nome</th>
								<th>Data Inicio</th>
								<th>Dt Prev Term</th>
								<th>Ações</th>
							</tr>
						</thead>
						<tbody ng-repeat="fase in fases">
							<tr ng-hide="editorEnabled">
								<td>{{fase.nomeFase}}</td>
								<td>{{fase.dataInicio | date: 'dd/MM/yyyy'}}</td>
								<td>{{fase.dataPrevistaTermino | date: 'dd/MM/yyyy'}}</td>
							<!--	<td>{{fase.custoPrevisto | currency: 'R$'}}</td> -->
								<td>
									<button class="btn btn-warning"
										ng-click="enableEditor()">
										<span class="glyphicon glyphicon-edit"></span>
									</button>
								</td>
								<td>
									<button class="btn btn-danger" ng-click="removerFase(fase)">
										<span class="glyphicon glyphicon-remove"></span>
									</button>
								</td>
							</tr>
							<tr ng-show="editorEnabled">
								<td>
									<input class="form-control" ng-model="fase.nomeFase" ng-show="editorEnabled">
								</td>
								<td>
										
										<input class="form-control" ng-model="fase.dataInicio" type="text" uib-datepicker-popup="shortDate" is-open="dataInicioAberto[$index]" datepicker-options="dateOptions" current-text="Hoje" clear-text="Limpar" close-text="Fechar" ng-show="editorEnabled" ng-readonly="false" alt-input-formats="altInputFormats" min-date="minDate" max-date="maxDate" ng-focus="abrirFaseDataInicio($event, $index)" ui-date-mask/> 
										<span class="input-group-btn">
											<button type="button" class="btn btn-default" ng-click="abrirFaseDataInicio($event, $index)">
												<i class="glyphicon glyphicon-calendar"></i>
											</button>
										</span>
								
								</td>
								<td>
									
										<input id="dataPrevistaTermino_{{$index}}" class="form-control" ng-model="fase.dataPrevistaTermino" type="text" uib-datepicker-popup="shortDate" is-open="dataPrevistaTerminoAberto[$index]" datepicker-options="dateOptions" current-text="Hoje" clear-text="Limpar" close-text="Fechar" ng-show="editorEnabled" ng-readonly="false" alt-input-formats="altInputFormats" min-date="minDate" max-date="maxDate" ng-focus="abrirFaseDataPrevistaTermino($event, $index)" ui-date-mask/>
										<span class="input-group-btn">
											<button type="button" class="btn btn-default" ng-click="abrirFaseDataPrevistaTermino($event, $index)">
												<i class="glyphicon glyphicon-calendar"></i>
											</button>
									</span>
								
								</td>
								<td style="width: 30%">
									<button class="btn bnt-success" ng-click="salvar()">OK</button>
									<button class="btn btn-danger" ng-click="disableEditor()">Cancelar</button>
								</td>
							</tr>
						</tbody>
					</table>
				</div>
			</div>
		</div>

	</div>
</form>

<div class="col-lg-7">
	<div ng-show="unidadeForm.nome.$invalid && unidadeForm.nome.$dirty"
	class="alert alert-danger">Por favor, preencha o nome da Unidade!</div>
</div>

<div class="modal-footer">
	<button class="btn btn-primary" ng-click="salvarUnidade(unidade, fases)"
		ng-disabled="!unidade.nomeUnidade || !unidade.dataInicio || !unidade.dataPrevistaTermino">Inserir</button>
	<button class="btn btn-warning" ng-click="cancelar()">Cancelar</button>
</div>